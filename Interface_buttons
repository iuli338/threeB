import customtkinter as ctk
from tkinter import *

ctk.set_appearance_mode("System")
ctk.set_default_color_theme("blue")

class App(ctk.CTk):
    def __init__(self):
        super().__init__()

        # --- Basic App Setup ---
        self.title("Three Panel Interface with Page Switching")
        self.geometry("480x320")

        # Configure the grid for the top button row (row 0) and the content area (row 1)
        self.grid_columnconfigure((0, 1, 2), weight=1) # 3 columns for buttons
        self.grid_rowconfigure(0, weight=0)          # Button row should not expand
        self.grid_rowconfigure(1, weight=1)          # Content area should expand

        # --- Common Style Configuration ---
        button_color = "#555555" # Dark grey for the panels
        hover_color = "#6a6a6a" # Slightly lighter grey for hover effect
        
        # Dictionary to hold the buttons (for easy iteration/styling)
        self.buttons = {} 

        # --- 1. Top Panel Buttons (Row 0) ---
        button_texts = ["Home", "Settings", "Quiz"]
        
        for i, text in enumerate(button_texts):
            button = ctk.CTkButton(
                self, 
                text=text,
                command=lambda t=text: self.show_page(t), # Command calls show_page with button text
                fg_color=button_color,
                hover_color=hover_color,
                corner_radius=10,
                text_color="white",
                font=ctk.CTkFont(size=20, weight="bold")
            )
            # Add padding and use 'sticky' to fill the column
            button.grid(row=0, column=i, padx=10, pady=20, sticky="ew")
            self.buttons[text] = button

        # --- 2. Content Container (Row 1) ---
        # This frame will hold the different pages
        self.container = ctk.CTkFrame(self)
        self.container.grid(row=1, column=0, columnspan=3, padx=10, pady=(0, 20), sticky="nsew")
        self.container.grid_rowconfigure(0, weight=1)
        self.container.grid_columnconfigure(0, weight=1)

        # Dictionary to hold the different page frames
        self.pages = {} 
        
        # Create the different "pages" (Frames)
        for PageName in (HomePage, SettingsPage, QuizPage):
            page = PageName(self.container, self)
            self.pages[PageName.__name__] = page
            # Place all pages in the same grid cell (r=0, c=0). Only one will be raised at a time.
            page.grid(row=0, column=0, sticky="nsew")

        # Start by showing the "Home" page
        self.show_page("Home")

    def show_page(self, page_name):
        """Raises the selected page frame to the top."""
        
        # Map the button text to the corresponding class name
        page_class_map = {
            "Home": "HomePage",
            "Settings": "SettingsPage",
            "Quiz": "QuizPage"
        }
        
        # Get the actual page widget
        page_key = page_class_map.get(page_name)
        page = self.pages.get(page_key)
        
        if page:
            page.tkraise() # Bring the selected frame to the front
            self.update_button_style(page_name)

    def update_button_style(self, active_button_text):
        """Highlights the active button."""
        default_color = "#555555"
        active_color = "#404040" # Slightly darker to show it's active

        for text, button in self.buttons.items():
            if text == active_button_text:
                button.configure(fg_color=active_color)
            else:
                button.configure(fg_color=default_color)

# --- Define the Page Classes ---

class HomePage(ctk.CTkFrame):
    def __init__(self, parent, controller):
        ctk.CTkFrame.__init__(self, parent)
        self.grid_columnconfigure(0, weight=1)
        self.grid_rowconfigure(0, weight=1)
        
        label = ctk.CTkLabel(self, text="üè† Welcome to the Home Page!", font=ctk.CTkFont(size=30))
        label.grid(row=0, column=0, padx=20, pady=20)

class SettingsPage(ctk.CTkFrame):
    def __init__(self, parent, controller):
        ctk.CTkFrame.__init__(self, parent)
        self.grid_columnconfigure(0, weight=1)
        self.grid_rowconfigure(0, weight=1)

        label = ctk.CTkLabel(self, text="‚öôÔ∏è Adjust your Settings here.", font=ctk.CTkFont(size=30))
        label.grid(row=0, column=0, padx=20, pady=20)
        
class QuizPage(ctk.CTkFrame):
    def __init__(self, parent, controller):
        ctk.CTkFrame.__init__(self, parent)
        self.grid_columnconfigure(0, weight=1)
        self.grid_rowconfigure(0, weight=1)

        label = ctk.CTkLabel(self, text="üìù Get ready for the Quiz!", font=ctk.CTkFont(size=30, weight="bold"))
        label.grid(row=0, column=0, padx=20, pady=20)


if __name__ == "__main__":
    app = App()
    app.mainloop()